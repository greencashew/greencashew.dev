<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Jan Górkiewicz"><meta name=description content="Overview Docker registry mechanism allows to quick download images from the image repository. This makes the publish/pull processes much easier. Unfortunately, this great feature can open new possibilities to an attacker who can corrupt the image in the registry.
In this scenario, we assume that the attacker already got write access to the docker image repository (Like public one docker hub or steal developer&amp;rsquo;s/Jenkins&amp;rsquo;s credentials to the private docker registry)"><meta name=keywords content="Software Engineering,Technical,Blog,Programming,Docker,Security,docker registry"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=/posts/how-to-swap-an-image-in-docker-registry-with-rigged-image/><title>How to swap an image in docker registry - with rigged image :: Jan Górkiewicz - Programmer Technical Blog</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.306087f5839fc27ce955c33866ee7d20ebd3e608781d79506b6c5ae97dd24661.css><meta itemprop=name content="How to swap an image in docker registry - with rigged image"><meta itemprop=description content="Overview Docker registry mechanism allows to quick download images from the image repository. This makes the publish/pull processes much easier. Unfortunately, this great feature can open new possibilities to an attacker who can corrupt the image in the registry.
In this scenario, we assume that the attacker already got write access to the docker image repository (Like public one docker hub or steal developer&rsquo;s/Jenkins&rsquo;s credentials to the private docker registry)"><meta itemprop=datePublished content="2020-12-21T18:51:20+01:00"><meta itemprop=dateModified content="2020-12-28T16:13:20+01:00"><meta itemprop=wordCount content="669"><meta itemprop=keywords content="Docker,Security,docker registry,"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to swap an image in docker registry - with rigged image"><meta name=twitter:description content="Overview Docker registry mechanism allows to quick download images from the image repository. This makes the publish/pull processes much easier. Unfortunately, this great feature can open new possibilities to an attacker who can corrupt the image in the registry.
In this scenario, we assume that the attacker already got write access to the docker image repository (Like public one docker hub or steal developer&rsquo;s/Jenkins&rsquo;s credentials to the private docker registry)"><meta property="og:title" content="How to swap an image in docker registry - with rigged image"><meta property="og:description" content="Overview Docker registry mechanism allows to quick download images from the image repository. This makes the publish/pull processes much easier. Unfortunately, this great feature can open new possibilities to an attacker who can corrupt the image in the registry.
In this scenario, we assume that the attacker already got write access to the docker image repository (Like public one docker hub or steal developer&rsquo;s/Jenkins&rsquo;s credentials to the private docker registry)"><meta property="og:type" content="article"><meta property="og:url" content="/posts/how-to-swap-an-image-in-docker-registry-with-rigged-image/"><meta property="article:published_time" content="2020-12-21T18:51:20+01:00"><meta property="article:modified_time" content="2020-12-28T16:13:20+01:00"><meta property="article:section" content="Docker"><meta property="article:section" content="Security"><meta property="article:published_time" content="2020-12-21 18:51:20 +0100 CET"></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>➜</span>
<span class=logo__mark__home>~</span>
<span class=logo__text>k get pod software-engineer</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/posts/>Posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><article><img src=docker.png class=post-cover><h1 class=post-title>How to swap an image in docker registry - with rigged image</h1><div class=post-info><p><span class=post-meta><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>4 minutes</span>
<span class=post-meta><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><span class=tag><a href=categories/docker/>Docker</a></span>
<span class=tag><a href=categories/security/>Security</a></span></span>
<span class=post-meta><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>669 Words</span>
<span class=post-meta><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2020-12-21
(Last updated: 2020-12-28)</span></p></div><hr><aside id=toc><div class=toc-title>Table of Contents :</div><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#preconditions>Preconditions</a></li><li><a href=#how-to-change-docker-images>How to change docker images</a></li><li><a href=#way-to-secure>Way to secure</a><ul><li><a href=#how-to-create-your-own-docker-registry>How to create your own docker registry</a></li></ul></li><li><a href=#sources>Sources</a></li></ul></nav></aside><hr><div class=post-content><h2 id=overview>Overview</h2><p>Docker registry mechanism allows to quick download images from the image repository. This makes the publish/pull processes much easier. Unfortunately, this great feature can open new possibilities to an attacker who can <strong>corrupt the image in the registry</strong>.</p><p>In this scenario, we assume that the attacker already <strong>got write access to the docker image repository</strong> (Like public one <a href=https://hub.docker.com/>docker hub</a> or steal developer&rsquo;s/Jenkins&rsquo;s credentials to the private docker registry)</p><h2 id=preconditions>Preconditions</h2><ul><li>The attacker has to have write access to the docker repository</li><li>No app signature checks applied</li></ul><h2 id=how-to-change-docker-images>How to change docker images</h2><p>Docker registry structure of locating images look like that:</p><pre><code class=language-console data-lang=console>repository/image:tag
</code></pre><p>Let assume we have a private registry with image <code>busybox</code> with tag <code>latest</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker push localhost:5000/busybox
</code></pre></div><pre><code class=language-console data-lang=console>The push refers to repository [localhost:5000/busybox]
d2421964bad1: Pushed
latest: digest: sha256:c9249fdf56138f0d929e2080ae98ee9cb2946f71498fc1484288e6a935b5e5bc size: 527
</code></pre><p>As you see tag name is <code>latest</code> and Digest of the current image starts with <code>c9249fd</code></p><p>Next step to be done is to take the rigged image and send it as <code>busybox</code> with tag <code>latest</code></p><p>Let&rsquo;s remove the current <code>busybox</code> image from local repo and rename <code>alpine</code> image to <code>busybox</code> and push into our registry</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker rmi busybox
docker image tag alpine localhost:5000/busybox
docker push localhost:5000/busybox
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>The push refers to repository <span style=color:#f92672>[</span>localhost:5000/busybox<span style=color:#f92672>]</span>
3e207b409db3: Pushed 
latest: digest: sha256:39eda93d15866957feaee28f8fc5adb545276a64147445c64992ef69804dbf01 size: <span style=color:#ae81ff>528</span>
</code></pre></div><p>As you see tag name is <code>latest</code> and Digest of the current image starts with <code>39eda93</code></p><p>Let&rsquo;s remove our image of fake <code>busybox</code> from our local repository</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker rmi localhost:5000/busybox:latest
</code></pre></div><pre><code class=language-console data-lang=console>Untagged: localhost:5000/busybox:latest
Untagged: localhost:5000/busybox@sha256:39eda93d15866957feaee28f8fc5adb545276a64147445c64992ef69804dbf01
</code></pre><p>and pull it from our private registry</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker pull localhost:5000/busybox:latest
</code></pre></div><pre><code class=language-console data-lang=console>latest: Pulling from busybox
Digest: sha256:39eda93d15866957feaee28f8fc5adb545276a64147445c64992ef69804dbf01
Status: Downloaded newer image for localhost:5000/busybox:latest
localhost:5000/busybox:latest
</code></pre><p>Next step to be done is being sure that only digest has not been changed:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker run -it localhost:5000/busybox:latest sh
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>/ <span style=color:#75715e># cat /etc/os-release</span>
NAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Alpine Linux&#34;</span>
ID<span style=color:#f92672>=</span>alpine
VERSION_ID<span style=color:#f92672>=</span>3.11.6
PRETTY_NAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Alpine Linux v3.11&#34;</span>
HOME_URL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://alpinelinux.org/&#34;</span>
BUG_REPORT_URL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://bugs.alpinelinux.org/&#34;</span>
</code></pre></div><p>As we can see It is an easy way to change docker image in <strong>behind of tag</strong>. <strong>So pullers of specific docker repository wouldn&rsquo;t be able to determine if the image changed.</strong></p><p>Only noticeable thing changed was <code>digests</code> which can be used for image validity check.</p><table><thead><tr><th>IMAGE</th><th>TAG</th><th>DIGIT</th></tr></thead><tbody><tr><td>Proper</td><td>LATEST</td><td>c9249fd</td></tr><tr><td>Fake</td><td>LATEST</td><td>39eda93</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h2 id=way-to-secure>Way to secure</h2><ul><li>Never download docker images from untrusted repository maintainers</li><li>Limit registry write access to a minimum (In best case only build server)</li><li>Implement <strong>the signing</strong> of docker images (see: <a href=https://github.com/theupdateframework/notary>https://github.com/theupdateframework/notary</a>)</li><li>Be prepared for this possibility:<ul><li>Use docker custom security profiles like <strong>AppArmor</strong>, <strong>Seccomp</strong></li><li>Use dynamic analysis tools like Remux</li><li>Don&rsquo;t execute images with excessive privileges (<strong>namespaces</strong>, <strong>privileged flag, added capabilities)</strong></li></ul></li></ul><h3 id=how-to-create-your-own-docker-registry>How to create your own docker registry</h3><p>To run own docker registry you need to have <strong>docker engine version >=1.6.0</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker run -d -p 5000:5000 --name registry registry:2
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Unable to find image <span style=color:#e6db74>&#39;registry:2&#39;</span> locally
2: Pulling from library/registry
cbdbe7a5bc2a: Already exists 
47112e65547d: Pull complete 
46bcb632e506: Pull complete 
c1cc712bcecd: Pull complete 
3db6272dcbfa: Pull complete 
Digest: sha256:8be26f81ffea54106bae012c6f349df70f4d5e7e2ec01b143c46e2c03b9e551d
Status: Downloaded newer image <span style=color:#66d9ef>for</span> registry:2
437d56f489f27e990b6b6e7b43358c670087b5731474a086b52713067056a728
</code></pre></div><p>Docker registry is simply docker image we run as a container. If everything came fine we should see running docker registry container:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker ps
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
437d56f489f2        registry:2          <span style=color:#e6db74>&#34;/entrypoint.sh /etc…&#34;</span>   <span style=color:#ae81ff>30</span> seconds ago      Up <span style=color:#ae81ff>28</span> seconds       0.0.0.0:5000-&gt;5000/tcp   registry
</code></pre></div><p>Ok now let be sure that we don&rsquo;t have any repository in our docker registry:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X GET localhost:5000/v2/_catalog
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{<span style=color:#f92672>&#34;repositories&#34;</span>:[]}
</code></pre></div><p>Then we can build or retag an image and push into the local registry</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker build .
docker push localhost:5000/myfirstimage
</code></pre></div><p>Now let see if our local registry has been updated:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker push localhost:5000/myfirstimage
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>The push refers to repository <span style=color:#f92672>[</span>localhost:5000/myfirstimage<span style=color:#f92672>]</span>
1079c30efc82: Pushed
latest: digest: sha256:a7766145a775d39e53a713c75b6fd6d318740e70327aaa3ed5d09e0ef33fc3df size: <span style=color:#ae81ff>527</span>
</code></pre></div><p>Let&rsquo;s check if the image is placed on the repository:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X GET localhost:5000/v2/_catalog
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{<span style=color:#f92672>&#34;repositories&#34;</span>:[<span style=color:#e6db74>&#34;myfirstimage&#34;</span>]}
</code></pre></div><p>and what tags for the image <code>myfirstimage</code> are place in docker repository:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -X GET localhost:5000/v2/myfirstimage/tags/list
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{<span style=color:#f92672>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;myfirstimage&#34;</span>,<span style=color:#f92672>&#34;tags&#34;</span>:[<span style=color:#e6db74>&#34;latest&#34;</span>]}
</code></pre></div><p>As everything is in place the client can pull the image with the command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker pull localhost:5000/myfirstimage
</code></pre></div><p>To stop the process and remove all the data we need to run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker container stop registry <span style=color:#f92672>&amp;&amp;</span> docker container rm -v registry
</code></pre></div><h2 id=sources>Sources</h2><ul><li><a href=https://docs.docker.com/registry/>https://docs.docker.com/registry/</a></li><li><a href=https://github.com/theupdateframework/notary>https://github.com/theupdateframework/notary</a></li><li><a href=https://docs.docker.com/engine/security/seccomp/>https://docs.docker.com/engine/security/seccomp/</a></li><li><a href=https://docs.docker.com/engine/security/apparmor/>https://docs.docker.com/engine/security/apparmor/</a></li><li><a href=https://github.com/REMnux/docker>https://github.com/REMnux/docker</a></li><li><a href=https://docs.remnux.org/run-tools-in-containers/remnux-containers>https://docs.remnux.org/run-tools-in-containers/remnux-containers</a></li><li><a href=https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities>https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities</a></li></ul></div></article><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>Tags:
<span class=tag><a href=tags/docker/>Docker</a></span>
<span class=tag><a href=tags/security/>Security</a></span>
<span class=tag><a href=tags/docker-registry/>docker registry</a></span></p><p class=post-meta>@ Last update: 2020-12-28</p></div><hr><p class=post-info>Maybe you want to share? :)</p><div class=sharing-buttons><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f" target=_blank rel=noopener aria-label title="Share on facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?url=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f" target=_blank rel=noopener aria-label title="Share on twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.tumblr.com/widgets/share/tool?posttype=link&title=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image&caption=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image&canonicalUrl=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f" target=_blank rel=noopener aria-label title="Share on tumblr"><div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.563 24c-5.093.0-7.031-3.756-7.031-6.411V9.747H5.116V6.648c3.63-1.313 4.512-4.596 4.71-6.469C9.84.051 9.941.0 9.999.0h3.517v6.114h4.801v3.633h-4.82v7.47c.016 1.001.375 2.371 2.207 2.371h.09c.631-.02 1.486-.205 1.936-.419l1.156 3.425c-.436.636-2.4 1.374-4.156 1.404h-.178l.011.002z"/></svg></div></div></a><a class=resp-sharing-button__link href="mailto:?subject=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image&body=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f" target=_self rel=noopener aria-label title="Share via email"><div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></div></div></a><a class=resp-sharing-button__link href="https://pinterest.com/pin/create/button/?url=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f&media=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f;description=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image" target=_blank rel=noopener aria-label title="Share on pinterest"><div class="resp-sharing-button resp-sharing-button--pinterest resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none"><path d="M12.017.0C5.396.0.029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024.0 1.518.769 1.518 1.688.0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128.0 3.768-2.245 3.768-5.487.0-2.861-2.063-4.869-5.008-4.869-3.41.0-5.409 2.562-5.409 5.199.0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646.0-3.776 2.748-7.252 7.92-7.252 4.158.0 7.392 2.967 7.392 6.923.0 4.135-2.607 7.462-6.233 7.462-1.214.0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607.0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017.0z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&url=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f&title=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image&summary=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image&source=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f" target=_blank rel=noopener aria-label title="Share on linkedin"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></div></div></a><a class=resp-sharing-button__link href="https://reddit.com/submit/?url=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f&resubmit=true&title=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image" target=_blank rel=noopener aria-label title="Share on reddit"><div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none"><path d="M12 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0zm5.01 4.744c.688.0 1.25.561 1.25 1.249a1.25 1.25.0 01-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968.0 1.754.786 1.754 1.754.0.716-.435 1.333-1.01 1.614a3.111 3.111.0 01.042.52c0 2.694-3.13 4.87-7.004 4.87s-7.004-2.176-7.004-4.87c0-.183.015-.366.043-.534A1.748 1.748.0 014.028 12c0-.968.786-1.754 1.754-1.754.463.0.898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342.0 01.14-.197.35.35.0 01.238-.042l2.906.617a1.214 1.214.0 011.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687.0 1.248-.561 1.248-1.249s-.561-1.249-1.249-1.249zm5.5.0c-.687.0-1.248.561-1.248 1.25.0.687.561 1.248 1.249 1.248s1.249-.561 1.249-1.249c0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327.0 00-.231.094.33.33.0 000 .463c.842.842 2.484.913 2.961.913s2.105-.056 2.961-.913a.361.361.0 00.029-.463.33.33.0 00-.464.0c-.547.533-1.684.73-2.512.73-.828.0-1.979-.196-2.512-.73a.326.326.0 00-.232-.095z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://www.xing.com/app/user?op=share;url=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f;title=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image" target=_blank rel=noopener aria-label title="Share on xing"><div class="resp-sharing-button resp-sharing-button--xing resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none"><path d="M18.188.0c-.517.0-.741.325-.927.66.0.0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211.0.375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016.0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894.0 21.686.0h-3.498zM3.648 4.74c-.211.0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016.0.021L1.86 16.051c-.099.188-.093.381.0.529.085.142.239.234.45.234h3.461c.518.0.766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></svg></div></div></a><a class=resp-sharing-button__link href="whatsapp://send?text=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image%20%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f" target=_blank rel=noopener aria-label title="Share on whatsapp"><div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198.0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479.0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87.0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86.0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64.0 5.122 1.03 6.988 2.898a9.825 9.825.0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815.0 0012.05.0C5.495.0.16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882.0 005.683 1.448h.005c6.554.0 11.89-5.335 11.893-11.893a11.821 11.821.0 00-3.48-8.413z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://news.ycombinator.com/submitlink?u=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f&t=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image" target=_blank rel=noopener aria-label title="Share on hacker news"><div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentcolor" stroke="none"><path d="M0 24V0h24v24H0zM6.951 5.896l4.112 7.708v5.064h1.583v-4.972l4.148-7.799h-1.749l-2.457 4.875c-.372.745-.688 1.434-.688 1.434s-.297-.708-.651-1.434L8.831 5.896h-1.88z"/></svg></div></div></a><a class=resp-sharing-button__link href="https://telegram.me/share/url?text=How%20to%20swap%20an%20image%20in%20docker%20registry%20-%20with%20rigged%20image&url=%2fposts%2fhow-to-swap-an-image-in-docker-registry-with-rigged-image%2f" target=_blank rel=noopener aria-label title="Share on telegram"><div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></div></div></a></div><hr><div class=pagination><div class=pagination__title><span class=pagination__title-h></span></div><div class=pagination__buttons><span class="button previous"><a href=/posts/docker-privilege-escalation-namespace-exploit/><span class=button__icon>←</span>
<span class=button__text>Docker privilege escalation - Namespace Exploit</span></a></span>
<span class="button next"><a href=/posts/backdooring-docker-images-reverse-shell/><span class=button__text>Backdooring Docker images - Reverse shell</span>
<span class=button__icon>→</span></a></span></div></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><div>&nbsp; <a href=https://github.com/greencashew/ target=_blank rel=noopener title=Github><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a>&nbsp;</div><span><a href=posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>&copy; 2020. All rights reserved. Jan Górkiewicz</span></div></div></footer></div><script type=text/javascript src=/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js integrity="sha512-3HFukJLJggt3+W2ilNASCu6xibW86pdSMJ6+on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script></body></html>